<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Interactive Web CV — Dashboard</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
      :root {
        --bg: #0f1724;
        --card: #0b1220;
        --muted: #94a3b8;
        --accent: #7c5cff;
        --glass: rgba(255, 255, 255, 0.04);
        --glass-2: rgba(255, 255, 255, 0.02);
      }
      * {
        box-sizing: border-box;
        font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto,
          "Helvetica Neue", Arial;
      }
      body {
        margin: 0;
        background: linear-gradient(180deg, #071026 0%, #0b1220 60%);
        color: #e6eef8;
        min-height: 100vh;
      }
      .container {
        max-width: 1100px;
        margin: 36px auto;
        padding: 24px;
      }
      header {
        display: flex;
        gap: 18px;
        align-items: center;
      }
      .avatar {
        width: 96px;
        height: 96px;
        border-radius: 18px;
        background: linear-gradient(135deg, var(--accent), #4cc9f0);
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 20px;
        font-weight: 700;
        color: #021;
        box-shadow: 0 6px 20px rgba(124, 92, 255, 0.18);
      }
      .degree-badge {
        display: inline-block;
        margin-top: 6px;
        background: linear-gradient(90deg, var(--accent), #4cc9f0);
        color: #021;
        font-size: 11px;
        font-weight: 700;
        padding: 3px 8px;
        border-radius: 999px;
        letter-spacing: 0.5px;
        box-shadow: 0 0 6px rgba(124, 92, 255, 0.4);
      }

      .title h1 {
        margin: 0;
        font-size: 22px;
      }
      .title p {
        margin: 4px 0 0;
        color: var(--muted);
        font-size: 13px;
      }

      .layout {
        display: grid;
        grid-template-columns: 360px 1fr;
        gap: 20px;
        margin-top: 22px;
      }
      .card {
        background: linear-gradient(180deg, var(--glass), var(--glass-2));
        padding: 18px;
        margin: 2px;
        border-radius: 12px;
        box-shadow: 0 6px 30px rgba(2, 6, 23, 0.6);
      }
      .left .section {
        margin-bottom: 16px;
      }
      .section h3 {
        margin: 0 0 10px;
        font-size: 14px;
      }
      .card h3 {
        margin-top: 5px;
      }
      .meta {
        font-size: 13px;
        color: var(--muted);
      }
      .tech-list {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }
      .chip {
        background: rgba(255, 255, 255, 0.04);
        padding: 6px 10px;
        border-radius: 999px;
        font-size: 13px;
        color: #dbeafe;
      }

      .projects-container {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        justify-content: center;
        align-items: flex-start;
        margin-top: 8px;
        text-align: center;
      }
      @keyframes chipFadeIn {
        from {
          opacity: 0;
          transform: translateY(10px) scale(0.98);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      .project-chip {
        opacity: 0;
        animation: chipFadeIn 0.5s ease forwards;
        background: rgba(255, 255, 255, 0.06);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 20px;
        padding: 10px 16px;
        min-width: 160px;
        max-width: 260px;
        transition: all 0.25s ease;
        backdrop-filter: blur(6px);
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);
      }

      .project-chip:hover {
        background: rgba(255, 255, 255, 0.1);
        transform: translateY(-2px);
        box-shadow: 0 0 12px rgba(255, 255, 255, 0.2);
      }

      .project-name {
        font-weight: 600;
        font-size: 15px;
        color: var(--accent, #4cc9f0);
        text-decoration: none;
        display: inline-block;
        margin-bottom: 4px;
      }

      .project-name:hover {
        text-decoration: underline;
      }

      .project-about {
        font-size: 13px;
        color: rgba(255, 255, 255, 0.8);
        line-height: 1.3em;
      }

      .collapsible-header {
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: space-between;
        user-select: none;
      }

      .collapsible-header::after {
        content: "▾";
        font-size: 14px;
        transition: transform 0.2s ease;
      }

      .collapsible-header.active::after {
        transform: rotate(-90deg);
      }

      .collapsible-content {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease, opacity 0.3s ease;
        opacity: 0;
      }

      .collapsible-content.open {
        max-height: 300px;
        opacity: 1;
      }

      .controls {
        display: flex;
        gap: 8px;
        align-items: center;
      }
      .btn {
        background: linear-gradient(90deg, var(--accent), #4cc9f0);
        border: none;
        padding: 8px 12px;
        color: #021;
        border-radius: 10px;
        cursor: pointer;
        font-weight: 600;
      }
      .btn.ghost {
        background: transparent;
        border: 1px solid rgba(255, 255, 255, 0.06);
        color: var(--muted);
      }

      .experience .exp-item {
        padding: 12px;
        border-radius: 10px;
        background: rgba(255, 255, 255, 0.02);
        margin-bottom: 10px;
      }
      .exp-item h4 {
        margin: 0;
        font-size: 15px;
      }
      .exp-item .range {
        font-size: 13px;
        color: var(--muted);
        margin-top: 4px;
      }
      .responsibilities {
        margin-top: 8px;
        font-size: 14px;
        color: #e6eef8;
      }

      .dashboard {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 14px;
      }
      canvas {
        background: transparent;
        border-radius: 8px;
      }

      .skills-bars .skill {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 10px;
      }

      .skill .bar {
        flex: 1;
        height: 10px;
        background: rgba(255, 255, 255, 0.04);
        border-radius: 999px;
        overflow: hidden;
      }
      .skill .bar > i {
        display: block;
        height: 100%;
        background: linear-gradient(90deg, var(--accent), #4cc9f0);
        transition: width 1.5s ease-in-out;
      }

      footer {
        margin-top: 16px;
        color: var(--muted);
        font-size: 13px;
      }

      .section h4 {
        margin: 10px 0 4px;
        font-size: 13px;
        color: #e0e8ff;
      }
      .section ul {
        margin: 0 0 8px 18px;
        padding: 0;
        list-style: disc;
      }

      @media (max-width: 900px) {
        .layout {
          grid-template-columns: 1fr;
        }
        .dashboard {
          grid-template-columns: 1fr;
        }
      }
      .animated-logo {
        animation: spin 16s linear infinite;
        filter: drop-shadow(0 0 6px rgba(124, 92, 255, 0.6));
        transition: transform 0.5s ease;
      }
      .animated-logo:hover {
        transform: scale(1.05);
        filter: drop-shadow(0 0 12px rgba(124, 92, 255, 0.9));
      }
      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }
      #bgCanvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 0; /* stays behind content */
        pointer-events: none;
      }
      main,
      .card,
      header,
      section {
        position: relative;
        z-index: 1;
      }
    </style>
  </head>

  <body>
    <canvas id="bgCanvas"></canvas>
    <div class="container">
      <header>
        <svg class="avatar animated-logo" viewBox="0 0 100 100">
          <defs>
            <linearGradient id="grad" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0%" stop-color="#7c5cff" />
              <stop offset="100%" stop-color="#4cc9f0" />
            </linearGradient>
            <filter id="glow">
              <feGaussianBlur stdDeviation="3" result="blur" />
              <feMerge>
                <feMergeNode in="blur" />
                <feMergeNode in="SourceGraphic" />
              </feMerge>
            </filter>
          </defs>
          <circle cx="50" cy="50" r="45" fill="url(#grad)" />
          <g stroke="white" stroke-width="2" opacity="0.8" filter="url(#glow)">
            <circle cx="50" cy="50" r="25" fill="none" />
            <line x1="50" y1="5" x2="50" y2="95" />
            <line x1="5" y1="50" x2="95" y2="50" />
            <line x1="20" y1="20" x2="80" y2="80" />
            <line x1="80" y1="20" x2="20" y2="80" />
          </g>
        </svg>

        <div class="title">
          <h1 id="name">Thomas Stainer</h1>
          <p id="tagline">Software • Data • Research</p>
          <div class="meta" id="contact">location • email • phone</div>
        </div>
      </header>

      <main class="layout">
        <aside class="left">
          <div class="card section">
            <h3>Profile</h3>
            <div id="profileText" style="color: var(--muted); font-size: 14px">
              A concise 2-3 line professional summary shows here.
            </div>
          </div>

          <div class="card section" id="projectsCard">
            <h3>Projects</h3>
            <div id="projectsList" class="projects-container"></div>
          </div>

          <div class="card section">
            <h3>🧠 Things I can do...</h3>

            <h4 class="collapsible-header">In an hour</h4>
            <div class="collapsible-content">
              <ul class="meta">
                <li>Automate a repetitive data task with Python</li>
                <li>Debug and patch an existing script or deployment</li>
                <li>Set up a CI/CD</li>
              </ul>
            </div>

            <h4 class="collapsible-header">In a day</h4>
            <div class="collapsible-content">
              <ul class="meta">
                <li>Prototype a small web or data app</li>
                <li>Containerize and deploy using Docker</li>
                <li>This CV</li>
              </ul>
            </div>

            <h4 class="collapsible-header">In a week</h4>
            <div class="collapsible-content">
              <ul class="meta">
                <li>Design and implement a production-ready backend</li>
                <li>Build a machine learning or analytics pipeline</li>
                <li>Integrate external APIs and authentication systems</li>
              </ul>
            </div>

            <h4 class="collapsible-header">In a month</h4>
            <div class="collapsible-content">
              <ul class="meta">
                <li>Architect and deliver a full-stack application</li>
                <li>Scale infrastructure for reliability and monitoring</li>
                <li>Document and hand over to internal teams</li>
              </ul>
            </div>
          </div>
          <div class="card section" style="margin-top: 14px">
            <h3 class="collapsible-header">
              🤖 Things I Google / StackOverflow / ChatGPT
            </h3>
            <div class="collapsible-content">
              <ul class="meta">
                <li>Regex patterns (I never remember the syntax)</li>
                <li>All things CSS related</li>
                <li>Syntax quirks or edge cases I rarely encounter</li>
                <li>
                  Library or API parameter details (because docs are faster to
                  query)
                </li>
                <li>
                  Small bash/python scripts for quick analysis, think "I need to
                  find and replace X in all files with Y..."
                </li>
                <li>Occasional "is this a good idea?" sanity checks</li>
              </ul>
            </div>
          </div>
        </aside>

        <section>
          <div class="card">
            <h3>Overview</h3>
            <div class="dashboard" style="margin-top: 2px">
              <div>
                <canvas id="pieChart"></canvas>
              </div>

              <div class="card section" style="max-width: 350px">
                <h3>Skills (years)</h3>
                <div id="skillsBars" class="skills-bars"></div>
              </div>
            </div>
            <footer id="dataFooter"></footer>
          </div>

          <div class="card" style="margin-top: 14px">
            <h3>Experience</h3>
            <div
              id="experienceList"
              class="experience"
              style="margin-top: 12px"
            ></div>
          </div>

          <div class="card" style="margin-top: 14px">
            <h3>Education</h3>
            <div
              id="educationList"
              class="experience"
              style="margin-top: 12px"
            ></div>
          </div>
        </section>
      </main>
    </div>

    <script>
      const cvData = {
        meta: {
          name: "Thomas Stainer",
          tagline: "Research Software Engineer",
          contact: "Belgium • stainertom+cv at gmail.com",
          profile:
            "Full-stack engineer focused on data, dashboards and automation. Experienced across startups, academia and large organisations. Expertise in scientific applications and research environments",
        },
        roles: [
          {
            title: "Research Software Engineer ",
            organisation: "OECD (OESO)",
            country: "France",
            start_date: "2023-03-06",
            end_date: "Present",
            technologies: ["Python", "C++", "React", "Docker", "Kubernetes"],
            cloud: ["Azure"],
            responsibilities: [
              "Leading software development at edenceHealth",
              "Successfully delivered numerous ETL projects to clients",
              "Architected in house ETL framework",
            ],
          },
          {
            title: "Lead Software Engineer ",
            organisation: "edenceHealth (Cronos Groep)",
            country: "Belgium",
            start_date: "2021-12-01",
            end_date: "2023-03-06",
            technologies: ["Python", "Docker", "Postgres", "SQL"],
            cloud: ["AWS"],
            responsibilities: [
              "Leading software development at edenceHealth",
              "Successfully delivered numerous ETL projects to clients",
              "Architected in house ETL framework",
            ],
          },
          {
            title: "Senior Software Engineer",
            organisation: "SCK CEN",
            country: "Belgium",
            start_date: "2021-02-01",
            end_date: "2021-11-30",
            technologies: ["C++", "Python", "Java"],
            cloud: [],
            responsibilities: [
              "Application development & Product Owner role",
              "Responsible for software architecture of the control system",
              "Requirements capture and liaising with stakeholders",
            ],
          },
          {
            title: "Lead Data Scientist",
            organisation: "Jigso",
            country: "Belgium",
            start_date: "2020-04-01",
            end_date: "2021-01-31",
            technologies: ["Python", "React", "Django"],
            cloud: ["AWS"],
            responsibilities: [
              "Use of supervised and unsupervised learning in algorithm development",
              "Front-end and back-end application development",
            ],
          },
          {
            title: "Research/Nuclear Software Engineer",
            organisation: "UKAEA",
            country: "UK",
            start_date: "2017-08-01",
            end_date: "2020-03-31",
            technologies: ["C++", "Fortran", "Python", "React", "Docker"],
            cloud: [],
            responsibilities: [
              "Lead software developer for FISPACT-II",
              "API & web application development using Flask & React",
              "Data analysis and Monte-Carlo HPC simulations driving fusion reactor design",
            ],
          },
          {
            title: "Software Engineer",
            organisation: "Petrotechnical Data Systems B.V",
            country: "Netherlands",
            start_date: "2014-09-01",
            end_date: "2017-04-01",
            technologies: ["C++", "Fortran", "C#", "Python"],
            cloud: [],
            responsibilities: [
              "Algorithms",
              "Mathematical Kernel Development",
              "Application Software Development",
            ],
          },
        ],
        education: [
          {
            degree: "PhD Particle Physics",
            institution: "University of Liverpool",
            start_date: "2011-10-01",
            end_date: "2016-02-01",
            details:
              "Thesis: Neutral Particle Detection Methods Using Noble Gases in LAGUNA-LBNO and MODES-SNM",
          },
          {
            degree: "MASt Mathematics",
            institution: "University of Cambridge",
            start_date: "2010-10-01",
            end_date: "2011-07-01",
            details: "Theoretical Physics and Applied Mathematics",
          },
          {
            degree: "BSc Physics",
            institution: "University of Exeter",
            start_date: "2007-09-01",
            end_date: "2010-07-01",
            details: "First class honours",
          },
        ],
        projects: [
          {
            name: "pypact",
            emoji: "💡",
            url: "https://github.com/fispact/pypact",
            about:
              "Author of open source python package to aid nuclear inventory calculations",
          },
          {
            name: "actigamma",
            emoji: "☢️",
            url: "https://github.com/fispact/actigamma",
            about:
              "Author of open source python package for processing decay data",
          },
          {
            name: "toast",
            emoji: "🧰",
            url: "https://github.com/thomasms/toast",
            about: "Author of open source modern Fortran unit testing library",
          },
          {
            name: "accountingtom.com",
            emoji: "📊",
            url: "https://www.accountingtom.com",
            about:
              "React based web application to determine gross and net calculator",
          },
        ],
      };

      // Chart handles
      let pieChart = null,
        barChart = null;

      // Utilities
      function parseDate(s) {
        if (!s) return null;
        const d = new Date(s);
        if (isNaN(d)) return null;
        return d;
      }

      function yearsBetween(start, end) {
        // precise year fraction
        const s = parseDate(start);
        const e = parseDate(end) || new Date();
        if (!s) return 0;
        const ms = e - s;
        const days = ms / (1000 * 60 * 60 * 24);
        const yrs = days / 365.25;
        return yrs;
      }

      function aggregate(data) {
        const roles = data.roles || [];
        // tech -> years
        const techYears = {};
        // countries -> count (or months/years) - we'll count total years spent there
        const countryYears = {};
        const techSet = new Set();

        roles.forEach((r) => {
          const ed = r.end_date == "Present" ? new Date() : r.end_date;
          const dur = yearsBetween(r.start_date, ed);
          const country =
            (r.country && r.country.trim()) ||
            (r.organisation && r.organisation.trim()) ||
            "Unknown";
          countryYears[country] = (countryYears[country] || 0) + dur;
          (r.technologies || []).forEach((t) => {
            techSet.add(t);
            techYears[t] = (techYears[t] || 0) + dur;
          });
        });

        return {
          roles,
          techYears,
          countryYears,
        };
      }

      function niceNumber(n) {
        return Math.round(n * 10) / 10;
      }

      // Render functions
      function renderProfile(meta) {
        document.getElementById("name").textContent = meta.name || "Your Name";
        document.getElementById("tagline").textContent = meta.tagline || "";
        document.getElementById("contact").textContent = meta.contact || "";
        document.getElementById("profileText").textContent = meta.profile || "";
      }

      function getDefaultEmoji(name) {
        const n = name.toLowerCase();
        if (n.includes("data")) return "📊";
        if (n.includes("ai")) return "🤖";
        if (n.includes("py")) return "🐍";
        if (n.includes("math")) return "➗";
        if (n.includes("viz")) return "🖼️";
        return "💡";
      }

      function renderSkillsBars(techYears) {
        const node = document.getElementById("skillsBars");
        node.innerHTML = "";
        const max = Math.max(...Object.values(techYears), 1);
        Object.keys(techYears)
          .sort((a, b) => techYears[b] - techYears[a])
          .forEach((k) => {
            const wrapper = document.createElement("div");
            wrapper.className = "skill";
            const label = document.createElement("div");
            label.style.width = "120px";
            label.style.fontSize = "13px";
            label.textContent = `${k} (${niceNumber(techYears[k])}y)`;
            const barWrap = document.createElement("div");
            barWrap.className = "bar";
            const inner = document.createElement("i");
            inner.style.width = Math.max(6, (techYears[k] / max) * 100) + "%";
            barWrap.appendChild(inner);
            wrapper.appendChild(label);
            wrapper.appendChild(barWrap);
            node.appendChild(wrapper);
          });
      }

      function renderProjects(projects) {
        const container = document.getElementById("projectsList");
        container.innerHTML = "";
        (projects || []).forEach((p) => {
          const chip = document.createElement("div");
          chip.className = "project-chip";

          const name = document.createElement("a");
          name.href = p.url;
          name.target = "_blank";
          name.rel = "noopener";
          name.className = "project-name";
          name.textContent = `${p.emoji || getDefaultEmoji(p.name)} ${p.name}`;

          const about = document.createElement("div");
          about.className = "project-about";
          about.textContent = p.about || "";

          chip.appendChild(name);
          chip.appendChild(about);

          chip.style.animationDelay = `${0.15 * container.childElementCount}s`;

          container.appendChild(chip);
        });
      }

      function renderExperience(roles) {
        const node = document.getElementById("experienceList");
        node.innerHTML = "";
        roles.sort((a, b) => new Date(b.start_date) - new Date(a.start_date));
        roles.forEach((r) => {
          const div = document.createElement("div");
          div.className = "exp-item";
          const h = document.createElement("h4");
          h.textContent = `${r.title} - ${r.organisation}`;
          const range = document.createElement("div");
          range.className = "range";
          const sd = r.start_date
            ? new Date(r.start_date).toLocaleDateString()
            : "Unknown";
          const ed =
            r.end_date && r.end_date != "Present"
              ? new Date(r.end_date).toLocaleDateString()
              : "Present";
          range.textContent = `${sd} → ${ed} • ${r.country ? r.country : ""}`;
          div.appendChild(h);
          div.appendChild(range);
          if (r.responsibilities && r.responsibilities.length) {
            const ul = document.createElement("ul");
            ul.className = "responsibilities";
            r.responsibilities.forEach((it) => {
              const li = document.createElement("li");
              li.textContent = it;
              ul.appendChild(li);
            });
            div.appendChild(ul);
          }
          node.appendChild(div);
        });
      }

      function renderEducation(education) {
        const node = document.getElementById("educationList");
        node.innerHTML = "";

        (education || [])
          .sort((a, b) => new Date(b.start_date) - new Date(a.start_date))
          .forEach((e) => {
            const div = document.createElement("div");
            div.className = "exp-item";

            // Header with icon + degree
            const h = document.createElement("h4");
            const degree = e.degree || e.title || "Education";
            const institution = e.institution || e.organisation || "";
            h.innerHTML = `🎓 <strong>${degree}</strong> - ${institution}`;

            const range = document.createElement("div");
            range.className = "range";
            const sd = e.start_date
              ? new Date(e.start_date).toLocaleDateString()
              : "Unknown";
            const ed = e.end_date
              ? new Date(e.end_date).toLocaleDateString()
              : "Present";
            range.textContent = `${sd} → ${ed}`;

            div.appendChild(h);
            div.appendChild(range);

            if (e.details) {
              const p = document.createElement("p");
              p.className = "responsibilities";
              p.textContent = e.details;
              div.appendChild(p);
            }

            // Optional: show degree badge (MSc, BSc, PhD, etc.)
            if (degree.match(/(msc|bsc|phd|mba|ba|ma)/i)) {
              const badge = document.createElement("span");
              badge.className = "degree-badge";
              badge.textContent = degree
                .match(/(msc|bsc|phd|mba|ba|ma)/i)[0]
                .toUpperCase();
              div.appendChild(badge);
            }

            node.appendChild(div);
          });
      }

      function renderCharts(countryYears, techYears) {
        // Pie - countries
        const pieCtx = document.getElementById("pieChart");
        const pieLabels = Object.keys(countryYears);
        const pieData = pieLabels.map((k) => niceNumber(countryYears[k]));
        if (pieChart) pieChart.destroy();
        pieChart = new Chart(pieCtx, {
          type: "pie",
          data: {
            labels: pieLabels,
            datasets: [{ data: pieData, hoverOffset: 8 }],
          },
          options: {
            plugins: {
              legend: {
                position: "bottom",
                labels: { color: "#cfe8ff" },
                tooltip: {
                  callbacks: {
                    label: (ctx) => `${ctx.label}: ${ctx.formattedValue} years`,
                  },
                },
              },
            },
          },
        });
      }

      function renderAll(parsed) {
        renderProfile(parsed.meta || {});
        const { roles, techYears, countryYears } = aggregate(parsed);
        const projects = parsed.projects || [];
        renderProjects(projects);
        renderSkillsBars(techYears);
        renderExperience(roles);
        renderEducation(parsed.education || []);
        renderCharts(countryYears, techYears);
        document.getElementById(
          "dataFooter"
        ).textContent = `Data last updated: ${new Date().toLocaleString()}`;
      }

      // Auto-load sample on first open
      renderAll(cvData);

      document.querySelectorAll(".collapsible-header").forEach((header) => {
        header.addEventListener("click", () => {
          header.classList.toggle("active");
          const content = header.nextElementSibling;
          content.classList.toggle("open");
        });
      });

      const bgCanvas = document.getElementById("bgCanvas");
      const bgCtx = bgCanvas.getContext("2d");
      resizeBgCanvas();

      window.addEventListener("resize", resizeBgCanvas);

      let mouseX = 0,
        mouseY = 0;
      window.addEventListener("mousemove", (e) => {
        mouseX = (e.clientX / window.innerWidth - 0.5) * 2; // -1 to 1
        mouseY = (e.clientY / window.innerHeight - 0.5) * 2; // -1 to 1
      });

      function resizeBgCanvas() {
        bgCanvas.width = window.innerWidth;
        bgCanvas.height = window.innerHeight;
      }

      // Colors for gradient
      const colors = [
        { r: 7, g: 16, b: 38 }, // dark blue
        { r: 11, g: 18, b: 32 }, // slightly lighter
        { r: 20, g: 25, b: 50 }, // soft accent
      ];

      let t = 0;
      const particles = [];
      const particleCount = 50; // adjust density

      for (let i = 0; i < particleCount; i++) {
        particles.push({
          x: Math.random() * bgCanvas.width,
          y: Math.random() * bgCanvas.height,
          radius: 0.5 + Math.random() * 2,
          speedX: (Math.random() - 0.5) * 0.2,
          speedY: (Math.random() - 0.5) * 0.2,
          alpha: 0.2 + Math.random() * 0.3,
        });
      }

      let hue = 200; // starting hue (blue-ish)
      function drawBg() {
        t += 0.002; // speed of gradient animation
        const gradient = bgCtx.createLinearGradient(
          0,
          0,
          bgCanvas.width,
          bgCanvas.height
        );
        const offset = Math.sin(t) * 0.5 + 0.5; // oscillate 0–1

        const c1 = colors[0],
          c2 = colors[1],
          c3 = colors[2];
        gradient.addColorStop(
          0,
          `rgb(${Math.round(c1.r + (c2.r - c1.r) * offset)}, ${Math.round(
            c1.g + (c2.g - c1.g) * offset
          )}, ${Math.round(c1.b + (c2.b - c1.b) * offset)})`
        );
        gradient.addColorStop(
          1,
          `rgb(${Math.round(c2.r + (c3.r - c2.r) * offset)}, ${Math.round(
            c2.g + (c3.g - c2.g) * offset
          )}, ${Math.round(c2.b + (c3.b - c2.b) * offset)})`
        );

        bgCtx.fillStyle = gradient;
        bgCtx.fillRect(0, 0, bgCanvas.width, bgCanvas.height);

        // draw particles
        hue += 0.1; // slow hue change

        particles.forEach((p) => {
          // base movement
          p.x += p.speedX;
          p.y += p.speedY;

          // subtle parallax based on mouse
          const parallaxFactor = 5;
          p.x += (mouseX * p.radius) / parallaxFactor;
          p.y += (mouseY * p.radius) / parallaxFactor;

          // wrap around edges
          if (p.x < 0) p.x = bgCanvas.width;
          if (p.x > bgCanvas.width) p.x = 0;
          if (p.y < 0) p.y = bgCanvas.height;
          if (p.y > bgCanvas.height) p.y = 0;

          // draw particle with glow and shifting hue
          bgCtx.beginPath();
          bgCtx.arc(p.x, p.y, p.radius, 0, 2 * Math.PI);
          const particleColor = `hsla(${
            (hue + p.radius * 20) % 360
          }, 80%, 70%, ${p.alpha})`;
          bgCtx.fillStyle = particleColor;
          bgCtx.shadowBlur = p.radius * 2; // subtle glow
          bgCtx.shadowColor = particleColor;
          bgCtx.fill();
        });

        requestAnimationFrame(drawBg);
      }

      drawBg();
    </script>
  </body>
</html>
